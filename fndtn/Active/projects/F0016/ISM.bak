"
"  File:	C:\FNDTN\ACTIVE\PROJECTS\F0016\ISM.abl
"  created:	10/18/99 22:54:38
"  from:	'C:\FNDTN\ACTIVE\PROJECTS\F0016\ISM.asf'
"  by:		fsm2hdl - version: 2.0.1.52
"
module ism
Title 'ism'

Declarations

"clocks
CLOCK PIN;

"input ports
_RESET PIN;
IBUS15..IBUS10 PIN;
IBUS = [IBUS15..IBUS10];
INTERRUPT PIN;

"output ports
ALU_ADD PIN;
ALU_CARRY_IN PIN;
BUS_NOT_SIGNEXTEND_TO_TEMP PIN;
CLOCK_INSTRUCTION_LATCH PIN;
CLOCK_PC PIN;
EN_DATAADDR_TO_INTERNALBUS PIN;
ENABLE_ADDER_TO_RESULT PIN;
ENABLE_AND_TO_RESULT PIN;
ENABLE_BUS_TO_ALU PIN;
ENABLE_CARRY_FROM_ALU PIN;
ENABLE_CARRY_OUT_TO_SHIFT_IN PIN;
ENABLE_CODEBUS_TO_LOGICAL PIN;
ENABLE_DATABUS_TO_LOGICAL PIN;
ENABLE_DOWN_REGADDR_TO_REG PIN;
ENABLE_EXTERNAL_TO_INTERNAL PIN;
ENABLE_GROUND_TO_BUS PIN;
ENABLE_INSTRUCTION_STATE PIN;
ENABLE_INTERNAL_TO_EXTERNAL PIN;
ENABLE_INVERT_TO_RESULT PIN;
ENABLE_LOAD_SHIFT PIN;
ENABLE_MMU_PHYS_TO_BUS PIN;
ENABLE_OR_TO_RESULT PIN;
ENABLE_OVERFLOW_FROM_ALU PIN;
ENABLE_PC_TO_BUS PIN;
ENABLE_REGISTERS_TO_BUS PIN;
ENABLE_RESULT_TO_BUS PIN;
ENABLE_SHIFT_OUT_TO_CARRY_IN PIN;
ENABLE_SHIFT_OUT_TO_SHIFT_IN PIN;
ENABLE_SHIFTER_TO_RESULT PIN;
ENABLE_SUPERREG_READ PIN;
ENABLE_SUPERREG_WRITE PIN;
ENABLE_USR_FROM_BUS PIN;
ENABLE_USR_TO_BUS PIN;
ENABLE_ZERO_TO_USR PIN;
LOAD_CARRY_BIT PIN;
LOAD_DATA_ADDRESS_LATCH PIN;
LOAD_OPERAND PIN;
LOAD_OVERFLOW_BIT PIN;
LOAD_PC PIN;
LOAD_RESULT_LATCH PIN;
LOAD_SHIFT PIN;
LOAD_ZERO_BIT PIN;
MEM_READ_NOT_WRITE PIN;
MEMREQ PIN;
READ_MMU PIN;
SHIFT_LEFT_NOT_RIGHT PIN;
SHIFT_OUT_BIT PIN;
SREGADDR_FROM_IWORD_NOT_UCODE PIN;
SUPERREG_ADDR_FROM_UCODE2..SUPERREG_ADDR_FROM_UCODE0 PIN;
SUPERREG_ADDR_FROM_UCODE = [SUPERREG_ADDR_FROM_UCODE2..SUPERREG_ADDR_FROM_UCODE0];
SUPERSET4..SUPERSET0 PIN;
SUPERSET = [SUPERSET4..SUPERSET0];
SUPERSET_NOT_BUS PIN;
UC_LOAD_FREEZE PIN;
UC_LOAD_ILLEGAL PIN;
UC_LOAD_INTENABLE PIN;
UC_LOAD_SOFTINT PIN;
UC_LOAD_SUPERBIT PIN;
WRITE_ENABLE_REGISTERS PIN;
WRITE_MMU PIN;
WRITE_TO_REGISTERS PIN;

"******** USER DEFINED ENCODED state machine: Sreg0 ******
	Sreg0_0 NODE istype 'reg';
xilinx property 'save Sreg0_0';
	Sreg0_1 NODE istype 'reg';
xilinx property 'save Sreg0_1';
	Sreg0_2 NODE istype 'reg';
xilinx property 'save Sreg0_2';
	Sreg0_3 NODE istype 'reg';
xilinx property 'save Sreg0_3';

	Sreg0 = [Sreg0_3, Sreg0_2, Sreg0_1, Sreg0_0];

	IFETCH1 = ^b0011; 
	IFETCH2 = ^b0100; 
	IFETCH3 = ^b0101; 
	MOVE1 = ^b0110; 
	MOVE2 = ^b0111; 
	MOVE3 = ^b1000; 
	MOVE4 = ^b1001; 
	MOVE5 = ^b1010; 
	RESET = ^b0001; "Trap and Default state


Equations

"diagram ACTIONS

"************* state machine: Sreg0 *************
" clock signals definitions
	Sreg0.clk = CLOCK;

	Sreg0_0.set = _RESET;
	Sreg0_1.clr = _RESET;
	Sreg0_2.clr = _RESET;
	Sreg0_3.clr = _RESET;
	WHEN ( (Sreg0 != IFETCH1) & (Sreg0 != IFETCH2) & (Sreg0 != IFETCH3) & (Sreg0 != MOVE1) & (Sreg0 != MOVE2) & (Sreg0 != MOVE3) & 
		(Sreg0 != MOVE4) & (Sreg0 != MOVE5) & (Sreg0 != RESET)) THEN
		Sreg0 := RESET;

State_diagram Sreg0


State IFETCH1:
    
    CLOCK_PC=1; 
    ENABLE_CODEBUS_TO_LOGICAL=1; 
    MEM_READ_NOT_WRITE=1; 
    ENABLE_EXTERNAL_TO_INTERNAL=1; 
     GoTo IFETCH2;


State IFETCH2:
    
    CLOCK_PC=0; 
    MEMREQ=1; 
     GoTo IFETCH3;


State IFETCH3:
    
    CLOCK_INSTRUCTION_LATCH=0; 
     IF (IBUS==1) THEN 
    MOVE1;


State MOVE1:
    
    ENABLE_DOWN_REGADDR_TO_REG=0; 
    ENABLE_REGISTERS_TO_BUS=1; 
     GoTo MOVE2;


State MOVE2:
    
    LOAD_DATA_ADDRESS_LATCH=1; 
     GoTo MOVE3;


State MOVE3:
    
    ENABLE_REGISTERS_TO_BUS=0; 
    ENABLE_DOWN_REGADDR_TO_REG=1; 
    EN_DATAADDR_TO_INTERNALBUS=1; 
     GoTo MOVE4;


State MOVE4:
    
    WRITE_ENABLE_REGISTERS=0; 
     GoTo MOVE5;


State MOVE5:
    
    WRITE_TO_REGISTERS=1; 
     GoTo IFETCH1;


State RESET:
    
    ENABLE_CODEBUS_TO_LOGICAL=1; 
    MEM_READ_NOT_WRITE=1; 
    UC_LOAD_SUPERBIT=0; 
    SUPERSET_NOT_BUS=1; 
    SUPERSET='00001'; 
     GoTo IFETCH2;

" end of state machine - Sreg0


end ism
